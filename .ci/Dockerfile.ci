ARG BASEIMG
ARG IMG_VERSION
FROM $BASEIMG:$IMG_VERSION

ARG ENTRYPOINT

WORKDIR /app
ENV ASPNETCORE_URLS="http://+:8080" \
    RUNTIME=$ENTRYPOINT
EXPOSE 8080

COPY ./app .
COPY ./.ci/docker_entrypoint.sh .

ENTRYPOINT [ "bash", "/app/docker_entrypoint.sh" ]